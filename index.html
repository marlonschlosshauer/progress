<!doctype html>
<html lang="de">
  <head>
	<title>IT-Recht</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="src/css/styles.css">
	<style>
	 .container {
		 display: grid;
		 padding-top: 15vh;
		 justify-content: center;
		 grid-gap: 50px;
	 }

	 #title {
		 margin: auto;
	 }

	 #prog {
		 width: 50vw;
		 max-width: 1200px;
	 }
	</style>
  </head>
  <body>
	<div class="container">
	  <h2 id="title" style="font-family: sans-serif">Progress:</h2>
	  <progress id="prog" max="100" value="70"></progress>
	</div>
	<script>

	 // Set start to now and end to now + 90 minutes
	 let start = new Date();
	 let end = new Date(start.valueOf() + (90 * 60 * 1000));

	 const params = new URLSearchParams(window.location.search);
	 if ( params ) {
	   if (params.has('title')) {
		 document.getElementById('title').innerHTML = params.get('title');
	   }

	   if (params.has('start')) {
		 start = new Date(params.get('start'));
	   }
	   if (params.has('end')) {
		 end = new Date(params.get('end'));
	   }
	 }

	 function remaining() {
	   const now = new Date(new Date().valueOf() - start.valueOf());
	   const remain = new Date(end.valueOf() - start.valueOf()).valueOf();

	   return Math.floor((now.valueOf() / remain.valueOf()) * 100);
	 }

	 function update() {
	   let left = remaining();
	   document.title = left + '%';
	   document.getElementById("prog").value = left;
	 }
	 update();

	 setInterval(update, 1000 * 60);
	</script>
  </body>
</html>
